2.事件循环机制
- 事件循环机制是一种处理异步操作和事件的机制。**它负责管理和调度任务的执行顺序**，确保代码按照正确的顺序执行，并避免阻塞主线程。
- 事件循环的基本原理
  - JavaScript引擎在执行代码时，会将**同步任务**按照顺序放入执行栈（Call Stack）中执行。
  - 当遇到异步任务（如定时器、网络请求、事件监听等），JavaScript引擎会将其交给相应的Web API进行处理，并继续执行下面的代码。
  - 异步任务在完成后，会将回调函数放入任务队列（Task Queue）中。
  - **当执行栈为空时，事件循环开始工作**。它会检查任务队列中是否有任务，如果有，会将任务从任务队列中取出，放入执行栈中执行。
  - 执行栈中的任务执行完毕后，事件循环再次检查任务队列，重复上述过程。

- 事件循环的**关键**
  - 将异步任务分离出来，通过回调函数的方式进行处理。当任务完成时，将其添加到任务队列中，等待事件循环的调度

- 事件循环中的**宏任务**和**微任务**
  - 宏任务：整体代码块、settimeout、setInterval
  - 微任务：Promise
  - **微任务的执行顺序大于宏任务**

- 事件循环的执行顺序
  - 执行同步任务,直到调用栈为空
  - **检查是否存在微任务列表**，如果存在，则依次执行所有微任务直至队列为空
  - 执行渲染操作，更新界面
  - 执行下一个宏任务(从宏任务队列中取出)
  - 跳转到第二部,重复执行
  